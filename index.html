<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>GitHub Images Canvas</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background-color: #f0f0f0;
    }
    canvas {
      display: block;
    }
  </style>
</head>
<body>
  <canvas id="drawing-canvas"></canvas>
  <script>
    // Canvas ayarlamaları
    const canvas = document.getElementById('drawing-canvas');
    const ctx = canvas.getContext('2d');
    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    // Resim dizisi ve indeks ayarı
    let images = [];
    let currentImageIndex = 0;

    // GitHub API URL'si ve token (sadece yerel kullanım için eklenmiştir)
    const API_URL = 'https://api.github.com/repos/showman1907/duck/contents/images?ref=main';
    const GITHUB_TOKEN = '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';

    // GitHub API'sinden resim listesini çekme
    fetch(API_URL, {
      headers: {
        'Authorization': 'token ' + GITHUB_TOKEN
      }
    })
      .then(response => {
        if (!response.ok) {
          throw new Error('API hatası: ' + response.status);
        }
        return response.json();
      })
      .then(data => {
        // .png uzantılı dosyaları filtreleyip images dizisine ekle
        data.forEach(item => {
          if (item.name.endsWith('.png')) {
            images.push(item.download_url);
          }
        });
        console.log("Bulunan resimler:", images);
        if (images.length > 0) {
          loadImage(images[currentImageIndex]);
        }
      })
      .catch(err => console.error('API hatası:', err));

    // Resmi yükleyip canvas'a çizme fonksiyonu
    function loadImage(src) {
      const img = new Image();
      img.crossOrigin = 'Anonymous'; // CORS sorunlarını önlemek için
      img.onload = () => {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        // Resmi canvas boyutlarına sığdırarak çiz
        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
      };
      img.onerror = () => console.error('Görsel yüklenemedi:', src);
      img.src = src;
    }

    // Sağ ve sol ok tuşlarıyla resimler arasında geçiş yapma
    document.addEventListener('keydown', (e) => {
      if (images.length === 0) return;
      if (e.key === 'ArrowRight') {
        currentImageIndex = (currentImageIndex + 1) % images.length;
        loadImage(images[currentImageIndex]);
      } else if (e.key === 'ArrowLeft') {
        currentImageIndex = (currentImageIndex - 1 + images.length) % images.length;
        loadImage(images[currentImageIndex]);
      }
    });
  </script>
</body>
</html>
